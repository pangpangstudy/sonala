## 什么是 PoH

1. 通过 SHA256 之类的 Hash 加密函数，来计算生成序列，提供验证两个事件（或者说两个区块）之间的时间流逝。
2. 创世去筷子，Hash 函数的输入是一个随机值，然后改函数的输出，是下一次 Hash 函数计算的输入参数之一。
3. 不用每个序列的 Hash 及其索引，都要发；而是每隔一段时间才发。
4. 这个 POH 可证明序列，在技术实现上应注意两个关键点。
   - hash 是抗碰撞的，因为一旦可以发生碰撞，就欧汇出现 Hash 值相同，从而无法区分序列
   - 该 Hash 的计算应在单核上，以单线程的方式来计算，因为该 Hash 的计算是一次顺序依赖上一次 Hash 计算输出的。
5. 最终基于 POH 生成链式证明

## Solana 的 PoH 机制及其处理方式

1. 连续哈希链生成：

Solana 通过 PoH 节点生成一个连续的 SHA256 哈希链。每一个新的哈希值是基于前一个哈希值和当前的输入数据（如交易或状态更新）计算得出的。这种链的每一个位置都有唯一的哈希值，形成了一个不可逆的序列。

2.  固定间隔的标记点：

在生成连续的哈希链过程中，Solana 会在固定的时间间隔（例如每个固定数量的哈希计算后）生成一个特定的标记点（称为"记录点"或"标签"）。这些标记点和其对应的哈希值将被记录和广播给网络中的其他节点。
标记点的生成不是随机的，而是按照固定的时间间隔来进行，以确保所有节点都能同步了解事件的时间顺序。

3.  验证和共识：

这些标记点的哈希值作为验证参考，可以被其他节点用于验证哈希链的完整性和正确性。通过检查这些标记点，节点可以确定链上的所有交易和事件是否按正确的顺序发生。
在 PoH 的基础上，Solana 结合了 Turbine 协议（高效的数据传播协议）和 Tower BFT 共识机制，使网络能够快速达成共识并生成新的区块。

4.  关键点和作用
    高效性：通过定期的标记点记录，Solana 可以高效地验证事件顺序，而不必处理所有中间哈希值的验证。这减少了网络的负担和通信开销。
    安全性：标记点的定期发布确保了哈希链的不可篡改性和时间顺序的可信度，使恶意节点难以伪造事件顺序或回溯历史。
    一致性：所有节点按照相同的规则生成和验证 PoH 链，确保了全网的一致性

## 涵盖外部事件的时间戳

1. 只是的生成序列(区块)，是没有意义的，该区块里应该能承载外部的事件(Events | Input)
2. combine 函数将于显示世界关联的数据(Events | Input)，与当前序列的 Index 和 Hash 结合起来，在通过 hash 函数计算，产生新的一个序列，也同样可以挂载可证明的链上的
3. combine 函数可以是如上表中的 hash 拼接，也可以是任何其他抗碰撞的操作。
4. 任何拿到此类带 Events 的序列，也是可复现这个序列的

## 如何证明 POH 序列

1. 可以将序列切成多个片段，然后交给多个核来证明或盐酸
<!-- ...... -->

## solana 如何横向扩展

## 如何保障一致性

1. 当存在恶意的 PoH Generator，可能会生成一个不一样的序列
   面对两个序列，都包含了关系的，但是存放在链上的顺序不同，我们呢该信谁？
2. 交由客户端自行处理，客户端灰白他所认可的最新的序列的 hash，与它的 event 绑定，生成 Event，来作为此次 hash 生成的输入参数之一
   这样恶意的 PoH Generator,由于没有人认可，所以做再多的恶也没有用。
3. 为了防止恶意 Generator 拿到用户原始 event，引入不合规的 hash 来生成 Event，实际客户端提交的是携带敏感信息的签名

## PoH 风险点

### 逆序攻击

逆序攻击是指攻击者试图篡改事件的顺序，以在区块链中获得不当利益。例如，攻击者可能试图将先发生的交易放在后面，或者将后发生的交易放在前面，以改变交易的先后顺序。

在 Solana 中，PoH 为所有交易和事件生成一个不可篡改的时间戳序列，这些时间戳严格依赖于前一个状态，形成一条连续的链。由于每个时间戳都是基于前一个状态和当前事件数据的组合生成的，任何篡改都会改变后续的时间戳，使得这种篡改容易被检测到。因此，PoH 有效地防止了逆序攻击。

### 抢跑攻击

写的一般：应该直接看，solana 白皮书

<!-- ....... -->

恶意节点具有高贷款的配置，理论上存在更大的几率享有 PoH Generating 的权利，收到更多的 Event

solana 采用多个 PoH Generator 混合的方式，以更小的成本开阻止此类攻击

### 长程攻击

写的一般：应该直接看，solana 白皮书
分叉出一个更长的链

等不到 Verifiers 共识和认同
